import e from"@actions/core";import t from"fs";import n from"fs-extra";import i from"gunzip-maybe";import r from"jszip";import o from"path";import a from"querystring";import E from"semver";import s from"tar-stream";import l from"typed-rest-client";import d from"whatwg-url";import u from"@apollo/client";import c from"cross-fetch";function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(null==t&&n.path)}},n.exports),n.exports}var T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var O=Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function N(e){return this instanceof N?(this.v=e,this):new N(e)}var f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};var _=Object.freeze({__proto__:null,__extends:function(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return p},__rest:function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},__decorate:function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var E=e.length-1;E>=0;E--)(r=e[E])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,i){t(n,i,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function E(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,E)}s((i=i.apply(e,t||[])).next())}))},__generator:function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:E(0),throw:E(1),return:E(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function E(o){return function(E){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,E])}}},__createBinding:O,__exportStar:function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||O(t,e,n)},__values:m,__read:S,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,E=o.length;a<E;a++,r++)i[r]=o[a];return i},__await:N,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||E(e,t)}))})}function E(e,t){try{(n=r[e](t)).value instanceof N?Promise.resolve(n.value.v).then(s,l):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function s(e){E("next",e)}function l(e){E("throw",e)}function d(e,t){e(t),o.shift(),o.length&&E(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:N(e[i](t)),done:"return"===i}:r?r(t):t}:r}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&O(t,e,n);return f(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}),I=A((function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.client=void 0;const i=_.__importDefault(c),r=e.getInput("token",{required:!0});if(!r)throw new Error("You need to provide a Github personal access token as `GITHUB_TOKEN` env variable. See README for more info.");const o=u.createHttpLink({uri:"https://api.github.com/graphql",headers:{authorization:"token "+r},fetch:i.default});n.client=new u.ApolloClient({link:o,cache:new u.InMemoryCache})})),D=A((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GetReleaseByTagDocument=t.UserStatusOrderField=t.UserBlockDuration=t.TopicSuggestionDeclineReason=t.TeamRole=t.TeamRepositoryOrderField=t.TeamPrivacy=t.TeamOrderField=t.TeamMembershipType=t.TeamMemberRole=t.TeamMemberOrderField=t.TeamDiscussionOrderField=t.TeamDiscussionCommentOrderField=t.SubscriptionState=t.StatusState=t.StarOrderField=t.SponsorshipPrivacy=t.SponsorshipOrderField=t.SponsorsTierOrderField=t.SecurityVulnerabilityOrderField=t.SecurityAdvisorySeverity=t.SecurityAdvisoryOrderField=t.SecurityAdvisoryIdentifierType=t.SecurityAdvisoryEcosystem=t.SearchType=t.SavedReplyOrderField=t.SamlSignatureAlgorithm=t.SamlDigestAlgorithm=t.RepositoryVisibility=t.RepositoryPrivacy=t.RepositoryPermission=t.RepositoryOrderField=t.RepositoryLockReason=t.RepositoryInvitationOrderField=t.RepositoryContributionType=t.RepositoryAffiliation=t.ReportedContentClassifiers=t.RepoRemoveMemberAuditEntryVisibility=t.RepoDestroyAuditEntryVisibility=t.RepoCreateAuditEntryVisibility=t.RepoChangeMergeSettingAuditEntryMergeType=t.RepoArchivedAuditEntryVisibility=t.RepoAddMemberAuditEntryVisibility=t.RepoAccessAuditEntryVisibility=t.ReleaseOrderField=t.RefOrderField=t.ReactionOrderField=t.ReactionContent=t.PullRequestUpdateState=t.PullRequestTimelineItemsItemType=t.PullRequestState=t.PullRequestReviewState=t.PullRequestReviewEvent=t.PullRequestReviewDecision=t.PullRequestReviewCommentState=t.PullRequestOrderField=t.PullRequestMergeMethod=t.ProjectTemplate=t.ProjectState=t.ProjectOrderField=t.ProjectColumnPurpose=t.ProjectCardState=t.ProjectCardArchivedState=t.PinnableItemType=t.PackageVersionOrderField=t.PackageType=t.PackageOrderField=t.PackageFileOrderField=t.OrganizationOrderField=t.OrganizationMembersCanCreateRepositoriesSettingValue=t.OrganizationMemberRole=t.OrganizationInvitationType=t.OrganizationInvitationRole=t.OrgUpdateMemberRepositoryCreationPermissionAuditEntryVisibility=t.OrgUpdateMemberAuditEntryPermission=t.OrgUpdateDefaultRepositoryPermissionAuditEntryPermission=t.OrgRemoveOutsideCollaboratorAuditEntryReason=t.OrgRemoveOutsideCollaboratorAuditEntryMembershipType=t.OrgRemoveMemberAuditEntryReason=t.OrgRemoveMemberAuditEntryMembershipType=t.OrgRemoveBillingManagerAuditEntryReason=t.OrgCreateAuditEntryBillingPlan=t.OrgAddMemberAuditEntryPermission=t.OrderDirection=t.OperationType=t.OauthApplicationCreateAuditEntryState=t.MilestoneState=t.MilestoneOrderField=t.MergeableState=t.LockReason=t.LanguageOrderField=t.LabelOrderField=t.IssueTimelineItemsItemType=t.IssueState=t.IssueOrderField=t.IpAllowListEntryOrderField=t.IpAllowListEnabledSettingValue=t.IdentityProviderConfigurationState=t.GitSignatureState=t.GistPrivacy=t.GistOrderField=t.FundingPlatform=t.EnterpriseUserDeployment=t.EnterpriseUserAccountMembershipRole=t.EnterpriseServerUserAccountsUploadSyncState=t.EnterpriseServerUserAccountsUploadOrderField=t.EnterpriseServerUserAccountOrderField=t.EnterpriseServerUserAccountEmailOrderField=t.EnterpriseServerInstallationOrderField=t.EnterpriseMembersCanMakePurchasesSettingValue=t.EnterpriseMembersCanCreateRepositoriesSettingValue=t.EnterpriseMemberOrderField=t.EnterpriseEnabledSettingValue=t.EnterpriseEnabledDisabledSettingValue=t.EnterpriseDefaultRepositoryPermissionSettingValue=t.EnterpriseAdministratorRole=t.EnterpriseAdministratorInvitationOrderField=t.DiffSide=t.DeploymentStatusState=t.DeploymentState=t.DeploymentOrderField=t.DefaultRepositoryPermissionField=t.CommitContributionOrderField=t.CommentCannotUpdateReason=t.CommentAuthorAssociation=t.CollaboratorAffiliation=t.AuditLogOrderField=t.ActionExecutionCapabilitySetting=void 0,function(e){e.Disabled="DISABLED",e.AllActions="ALL_ACTIONS",e.LocalActionsOnly="LOCAL_ACTIONS_ONLY",e.NoPolicy="NO_POLICY"}(t.ActionExecutionCapabilitySetting||(t.ActionExecutionCapabilitySetting={})),function(e){e.CreatedAt="CREATED_AT"}(t.AuditLogOrderField||(t.AuditLogOrderField={})),function(e){e.Outside="OUTSIDE",e.Direct="DIRECT",e.All="ALL"}(t.CollaboratorAffiliation||(t.CollaboratorAffiliation={})),function(e){e.Member="MEMBER",e.Owner="OWNER",e.Collaborator="COLLABORATOR",e.Contributor="CONTRIBUTOR",e.FirstTimeContributor="FIRST_TIME_CONTRIBUTOR",e.FirstTimer="FIRST_TIMER",e.None="NONE"}(t.CommentAuthorAssociation||(t.CommentAuthorAssociation={})),function(e){e.Archived="ARCHIVED",e.InsufficientAccess="INSUFFICIENT_ACCESS",e.Locked="LOCKED",e.LoginRequired="LOGIN_REQUIRED",e.Maintenance="MAINTENANCE",e.VerifiedEmailRequired="VERIFIED_EMAIL_REQUIRED",e.Denied="DENIED"}(t.CommentCannotUpdateReason||(t.CommentCannotUpdateReason={})),function(e){e.OccurredAt="OCCURRED_AT",e.CommitCount="COMMIT_COUNT"}(t.CommitContributionOrderField||(t.CommitContributionOrderField={})),function(e){e.None="NONE",e.Read="READ",e.Write="WRITE",e.Admin="ADMIN"}(t.DefaultRepositoryPermissionField||(t.DefaultRepositoryPermissionField={})),function(e){e.CreatedAt="CREATED_AT"}(t.DeploymentOrderField||(t.DeploymentOrderField={})),function(e){e.Abandoned="ABANDONED",e.Active="ACTIVE",e.Destroyed="DESTROYED",e.Error="ERROR",e.Failure="FAILURE",e.Inactive="INACTIVE",e.Pending="PENDING",e.Queued="QUEUED",e.InProgress="IN_PROGRESS"}(t.DeploymentState||(t.DeploymentState={})),function(e){e.Pending="PENDING",e.Success="SUCCESS",e.Failure="FAILURE",e.Inactive="INACTIVE",e.Error="ERROR",e.Queued="QUEUED",e.InProgress="IN_PROGRESS"}(t.DeploymentStatusState||(t.DeploymentStatusState={})),function(e){e.Left="LEFT",e.Right="RIGHT"}(t.DiffSide||(t.DiffSide={})),function(e){e.CreatedAt="CREATED_AT"}(t.EnterpriseAdministratorInvitationOrderField||(t.EnterpriseAdministratorInvitationOrderField={})),function(e){e.Owner="OWNER",e.BillingManager="BILLING_MANAGER"}(t.EnterpriseAdministratorRole||(t.EnterpriseAdministratorRole={})),function(e){e.NoPolicy="NO_POLICY",e.Admin="ADMIN",e.Write="WRITE",e.Read="READ",e.None="NONE"}(t.EnterpriseDefaultRepositoryPermissionSettingValue||(t.EnterpriseDefaultRepositoryPermissionSettingValue={})),function(e){e.Enabled="ENABLED",e.Disabled="DISABLED",e.NoPolicy="NO_POLICY"}(t.EnterpriseEnabledDisabledSettingValue||(t.EnterpriseEnabledDisabledSettingValue={})),function(e){e.Enabled="ENABLED",e.NoPolicy="NO_POLICY"}(t.EnterpriseEnabledSettingValue||(t.EnterpriseEnabledSettingValue={})),function(e){e.Login="LOGIN",e.CreatedAt="CREATED_AT"}(t.EnterpriseMemberOrderField||(t.EnterpriseMemberOrderField={})),function(e){e.NoPolicy="NO_POLICY",e.All="ALL",e.Public="PUBLIC",e.Private="PRIVATE",e.Disabled="DISABLED"}(t.EnterpriseMembersCanCreateRepositoriesSettingValue||(t.EnterpriseMembersCanCreateRepositoriesSettingValue={})),function(e){e.Enabled="ENABLED",e.Disabled="DISABLED"}(t.EnterpriseMembersCanMakePurchasesSettingValue||(t.EnterpriseMembersCanMakePurchasesSettingValue={})),function(e){e.HostName="HOST_NAME",e.CustomerName="CUSTOMER_NAME",e.CreatedAt="CREATED_AT"}(t.EnterpriseServerInstallationOrderField||(t.EnterpriseServerInstallationOrderField={})),function(e){e.Email="EMAIL"}(t.EnterpriseServerUserAccountEmailOrderField||(t.EnterpriseServerUserAccountEmailOrderField={})),function(e){e.Login="LOGIN",e.RemoteCreatedAt="REMOTE_CREATED_AT"}(t.EnterpriseServerUserAccountOrderField||(t.EnterpriseServerUserAccountOrderField={})),function(e){e.CreatedAt="CREATED_AT"}(t.EnterpriseServerUserAccountsUploadOrderField||(t.EnterpriseServerUserAccountsUploadOrderField={})),function(e){e.Pending="PENDING",e.Success="SUCCESS",e.Failure="FAILURE"}(t.EnterpriseServerUserAccountsUploadSyncState||(t.EnterpriseServerUserAccountsUploadSyncState={})),function(e){e.Member="MEMBER",e.Owner="OWNER"}(t.EnterpriseUserAccountMembershipRole||(t.EnterpriseUserAccountMembershipRole={})),function(e){e.Cloud="CLOUD",e.Server="SERVER"}(t.EnterpriseUserDeployment||(t.EnterpriseUserDeployment={})),function(e){e.Github="GITHUB",e.Patreon="PATREON",e.OpenCollective="OPEN_COLLECTIVE",e.KoFi="KO_FI",e.Tidelift="TIDELIFT",e.CommunityBridge="COMMUNITY_BRIDGE",e.Liberapay="LIBERAPAY",e.Issuehunt="ISSUEHUNT",e.Otechie="OTECHIE",e.Custom="CUSTOM"}(t.FundingPlatform||(t.FundingPlatform={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.PushedAt="PUSHED_AT"}(t.GistOrderField||(t.GistOrderField={})),function(e){e.Public="PUBLIC",e.Secret="SECRET",e.All="ALL"}(t.GistPrivacy||(t.GistPrivacy={})),function(e){e.Valid="VALID",e.Invalid="INVALID",e.MalformedSig="MALFORMED_SIG",e.UnknownKey="UNKNOWN_KEY",e.BadEmail="BAD_EMAIL",e.UnverifiedEmail="UNVERIFIED_EMAIL",e.NoUser="NO_USER",e.UnknownSigType="UNKNOWN_SIG_TYPE",e.Unsigned="UNSIGNED",e.GpgverifyUnavailable="GPGVERIFY_UNAVAILABLE",e.GpgverifyError="GPGVERIFY_ERROR",e.NotSigningKey="NOT_SIGNING_KEY",e.ExpiredKey="EXPIRED_KEY",e.OcspPending="OCSP_PENDING",e.OcspError="OCSP_ERROR",e.BadCert="BAD_CERT",e.OcspRevoked="OCSP_REVOKED"}(t.GitSignatureState||(t.GitSignatureState={})),function(e){e.Enforced="ENFORCED",e.Configured="CONFIGURED",e.Unconfigured="UNCONFIGURED"}(t.IdentityProviderConfigurationState||(t.IdentityProviderConfigurationState={})),function(e){e.Enabled="ENABLED",e.Disabled="DISABLED"}(t.IpAllowListEnabledSettingValue||(t.IpAllowListEnabledSettingValue={})),function(e){e.CreatedAt="CREATED_AT",e.AllowListValue="ALLOW_LIST_VALUE"}(t.IpAllowListEntryOrderField||(t.IpAllowListEntryOrderField={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.Comments="COMMENTS"}(t.IssueOrderField||(t.IssueOrderField={})),function(e){e.Open="OPEN",e.Closed="CLOSED"}(t.IssueState||(t.IssueState={})),function(e){e.IssueComment="ISSUE_COMMENT",e.CrossReferencedEvent="CROSS_REFERENCED_EVENT",e.AddedToProjectEvent="ADDED_TO_PROJECT_EVENT",e.AssignedEvent="ASSIGNED_EVENT",e.ClosedEvent="CLOSED_EVENT",e.CommentDeletedEvent="COMMENT_DELETED_EVENT",e.ConnectedEvent="CONNECTED_EVENT",e.ConvertedNoteToIssueEvent="CONVERTED_NOTE_TO_ISSUE_EVENT",e.DemilestonedEvent="DEMILESTONED_EVENT",e.DisconnectedEvent="DISCONNECTED_EVENT",e.LabeledEvent="LABELED_EVENT",e.LockedEvent="LOCKED_EVENT",e.MarkedAsDuplicateEvent="MARKED_AS_DUPLICATE_EVENT",e.MentionedEvent="MENTIONED_EVENT",e.MilestonedEvent="MILESTONED_EVENT",e.MovedColumnsInProjectEvent="MOVED_COLUMNS_IN_PROJECT_EVENT",e.PinnedEvent="PINNED_EVENT",e.ReferencedEvent="REFERENCED_EVENT",e.RemovedFromProjectEvent="REMOVED_FROM_PROJECT_EVENT",e.RenamedTitleEvent="RENAMED_TITLE_EVENT",e.ReopenedEvent="REOPENED_EVENT",e.SubscribedEvent="SUBSCRIBED_EVENT",e.TransferredEvent="TRANSFERRED_EVENT",e.UnassignedEvent="UNASSIGNED_EVENT",e.UnlabeledEvent="UNLABELED_EVENT",e.UnlockedEvent="UNLOCKED_EVENT",e.UserBlockedEvent="USER_BLOCKED_EVENT",e.UnmarkedAsDuplicateEvent="UNMARKED_AS_DUPLICATE_EVENT",e.UnpinnedEvent="UNPINNED_EVENT",e.UnsubscribedEvent="UNSUBSCRIBED_EVENT"}(t.IssueTimelineItemsItemType||(t.IssueTimelineItemsItemType={})),function(e){e.Name="NAME",e.CreatedAt="CREATED_AT"}(t.LabelOrderField||(t.LabelOrderField={})),function(e){e.Size="SIZE"}(t.LanguageOrderField||(t.LanguageOrderField={})),function(e){e.OffTopic="OFF_TOPIC",e.TooHeated="TOO_HEATED",e.Resolved="RESOLVED",e.Spam="SPAM"}(t.LockReason||(t.LockReason={})),function(e){e.Mergeable="MERGEABLE",e.Conflicting="CONFLICTING",e.Unknown="UNKNOWN"}(t.MergeableState||(t.MergeableState={})),function(e){e.DueDate="DUE_DATE",e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.Number="NUMBER"}(t.MilestoneOrderField||(t.MilestoneOrderField={})),function(e){e.Open="OPEN",e.Closed="CLOSED"}(t.MilestoneState||(t.MilestoneState={})),function(e){e.Active="ACTIVE",e.Suspended="SUSPENDED",e.PendingDeletion="PENDING_DELETION"}(t.OauthApplicationCreateAuditEntryState||(t.OauthApplicationCreateAuditEntryState={})),function(e){e.Access="ACCESS",e.Authentication="AUTHENTICATION",e.Create="CREATE",e.Modify="MODIFY",e.Remove="REMOVE",e.Restore="RESTORE",e.Transfer="TRANSFER"}(t.OperationType||(t.OperationType={})),function(e){e.Asc="ASC",e.Desc="DESC"}(t.OrderDirection||(t.OrderDirection={})),function(e){e.Read="READ",e.Admin="ADMIN"}(t.OrgAddMemberAuditEntryPermission||(t.OrgAddMemberAuditEntryPermission={})),function(e){e.Free="FREE",e.Business="BUSINESS",e.BusinessPlus="BUSINESS_PLUS",e.Unlimited="UNLIMITED",e.TieredPerSeat="TIERED_PER_SEAT"}(t.OrgCreateAuditEntryBillingPlan||(t.OrgCreateAuditEntryBillingPlan={})),function(e){e.TwoFactorRequirementNonCompliance="TWO_FACTOR_REQUIREMENT_NON_COMPLIANCE",e.SamlExternalIdentityMissing="SAML_EXTERNAL_IDENTITY_MISSING",e.SamlSsoEnforcementRequiresExternalIdentity="SAML_SSO_ENFORCEMENT_REQUIRES_EXTERNAL_IDENTITY"}(t.OrgRemoveBillingManagerAuditEntryReason||(t.OrgRemoveBillingManagerAuditEntryReason={})),function(e){e.DirectMember="DIRECT_MEMBER",e.Admin="ADMIN",e.BillingManager="BILLING_MANAGER",e.Unaffiliated="UNAFFILIATED",e.OutsideCollaborator="OUTSIDE_COLLABORATOR"}(t.OrgRemoveMemberAuditEntryMembershipType||(t.OrgRemoveMemberAuditEntryMembershipType={})),function(e){e.TwoFactorRequirementNonCompliance="TWO_FACTOR_REQUIREMENT_NON_COMPLIANCE",e.SamlExternalIdentityMissing="SAML_EXTERNAL_IDENTITY_MISSING",e.SamlSsoEnforcementRequiresExternalIdentity="SAML_SSO_ENFORCEMENT_REQUIRES_EXTERNAL_IDENTITY",e.UserAccountDeleted="USER_ACCOUNT_DELETED",e.TwoFactorAccountRecovery="TWO_FACTOR_ACCOUNT_RECOVERY"}(t.OrgRemoveMemberAuditEntryReason||(t.OrgRemoveMemberAuditEntryReason={})),function(e){e.OutsideCollaborator="OUTSIDE_COLLABORATOR",e.Unaffiliated="UNAFFILIATED",e.BillingManager="BILLING_MANAGER"}(t.OrgRemoveOutsideCollaboratorAuditEntryMembershipType||(t.OrgRemoveOutsideCollaboratorAuditEntryMembershipType={})),function(e){e.TwoFactorRequirementNonCompliance="TWO_FACTOR_REQUIREMENT_NON_COMPLIANCE",e.SamlExternalIdentityMissing="SAML_EXTERNAL_IDENTITY_MISSING"}(t.OrgRemoveOutsideCollaboratorAuditEntryReason||(t.OrgRemoveOutsideCollaboratorAuditEntryReason={})),function(e){e.Read="READ",e.Write="WRITE",e.Admin="ADMIN",e.None="NONE"}(t.OrgUpdateDefaultRepositoryPermissionAuditEntryPermission||(t.OrgUpdateDefaultRepositoryPermissionAuditEntryPermission={})),function(e){e.Read="READ",e.Admin="ADMIN"}(t.OrgUpdateMemberAuditEntryPermission||(t.OrgUpdateMemberAuditEntryPermission={})),function(e){e.All="ALL",e.Public="PUBLIC",e.None="NONE",e.Private="PRIVATE",e.Internal="INTERNAL",e.PublicInternal="PUBLIC_INTERNAL",e.PrivateInternal="PRIVATE_INTERNAL",e.PublicPrivate="PUBLIC_PRIVATE"}(t.OrgUpdateMemberRepositoryCreationPermissionAuditEntryVisibility||(t.OrgUpdateMemberRepositoryCreationPermissionAuditEntryVisibility={})),function(e){e.DirectMember="DIRECT_MEMBER",e.Admin="ADMIN",e.BillingManager="BILLING_MANAGER",e.Reinstate="REINSTATE"}(t.OrganizationInvitationRole||(t.OrganizationInvitationRole={})),function(e){e.User="USER",e.Email="EMAIL"}(t.OrganizationInvitationType||(t.OrganizationInvitationType={})),function(e){e.Member="MEMBER",e.Admin="ADMIN"}(t.OrganizationMemberRole||(t.OrganizationMemberRole={})),function(e){e.All="ALL",e.Private="PRIVATE",e.Disabled="DISABLED"}(t.OrganizationMembersCanCreateRepositoriesSettingValue||(t.OrganizationMembersCanCreateRepositoriesSettingValue={})),function(e){e.CreatedAt="CREATED_AT",e.Login="LOGIN"}(t.OrganizationOrderField||(t.OrganizationOrderField={})),function(e){e.CreatedAt="CREATED_AT"}(t.PackageFileOrderField||(t.PackageFileOrderField={})),function(e){e.CreatedAt="CREATED_AT"}(t.PackageOrderField||(t.PackageOrderField={})),function(e){e.Npm="NPM",e.Rubygems="RUBYGEMS",e.Maven="MAVEN",e.Docker="DOCKER",e.Debian="DEBIAN",e.Nuget="NUGET",e.Pypi="PYPI"}(t.PackageType||(t.PackageType={})),function(e){e.CreatedAt="CREATED_AT"}(t.PackageVersionOrderField||(t.PackageVersionOrderField={})),function(e){e.Repository="REPOSITORY",e.Gist="GIST",e.Issue="ISSUE",e.Project="PROJECT",e.PullRequest="PULL_REQUEST",e.User="USER",e.Organization="ORGANIZATION",e.Team="TEAM"}(t.PinnableItemType||(t.PinnableItemType={})),function(e){e.Archived="ARCHIVED",e.NotArchived="NOT_ARCHIVED"}(t.ProjectCardArchivedState||(t.ProjectCardArchivedState={})),function(e){e.ContentOnly="CONTENT_ONLY",e.NoteOnly="NOTE_ONLY",e.Redacted="REDACTED"}(t.ProjectCardState||(t.ProjectCardState={})),function(e){e.Todo="TODO",e.InProgress="IN_PROGRESS",e.Done="DONE"}(t.ProjectColumnPurpose||(t.ProjectColumnPurpose={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.Name="NAME"}(t.ProjectOrderField||(t.ProjectOrderField={})),function(e){e.Open="OPEN",e.Closed="CLOSED"}(t.ProjectState||(t.ProjectState={})),function(e){e.BasicKanban="BASIC_KANBAN",e.AutomatedKanbanV2="AUTOMATED_KANBAN_V2",e.AutomatedReviewsKanban="AUTOMATED_REVIEWS_KANBAN",e.BugTriage="BUG_TRIAGE"}(t.ProjectTemplate||(t.ProjectTemplate={})),function(e){e.Merge="MERGE",e.Squash="SQUASH",e.Rebase="REBASE"}(t.PullRequestMergeMethod||(t.PullRequestMergeMethod={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT"}(t.PullRequestOrderField||(t.PullRequestOrderField={})),function(e){e.Pending="PENDING",e.Submitted="SUBMITTED"}(t.PullRequestReviewCommentState||(t.PullRequestReviewCommentState={})),function(e){e.ChangesRequested="CHANGES_REQUESTED",e.Approved="APPROVED",e.ReviewRequired="REVIEW_REQUIRED"}(t.PullRequestReviewDecision||(t.PullRequestReviewDecision={})),function(e){e.Comment="COMMENT",e.Approve="APPROVE",e.RequestChanges="REQUEST_CHANGES",e.Dismiss="DISMISS"}(t.PullRequestReviewEvent||(t.PullRequestReviewEvent={})),function(e){e.Pending="PENDING",e.Commented="COMMENTED",e.Approved="APPROVED",e.ChangesRequested="CHANGES_REQUESTED",e.Dismissed="DISMISSED"}(t.PullRequestReviewState||(t.PullRequestReviewState={})),function(e){e.Open="OPEN",e.Closed="CLOSED",e.Merged="MERGED"}(t.PullRequestState||(t.PullRequestState={})),function(e){e.PullRequestCommit="PULL_REQUEST_COMMIT",e.PullRequestCommitCommentThread="PULL_REQUEST_COMMIT_COMMENT_THREAD",e.PullRequestReview="PULL_REQUEST_REVIEW",e.PullRequestReviewThread="PULL_REQUEST_REVIEW_THREAD",e.PullRequestRevisionMarker="PULL_REQUEST_REVISION_MARKER",e.AutomaticBaseChangeFailedEvent="AUTOMATIC_BASE_CHANGE_FAILED_EVENT",e.AutomaticBaseChangeSucceededEvent="AUTOMATIC_BASE_CHANGE_SUCCEEDED_EVENT",e.BaseRefChangedEvent="BASE_REF_CHANGED_EVENT",e.BaseRefForcePushedEvent="BASE_REF_FORCE_PUSHED_EVENT",e.DeployedEvent="DEPLOYED_EVENT",e.DeploymentEnvironmentChangedEvent="DEPLOYMENT_ENVIRONMENT_CHANGED_EVENT",e.HeadRefDeletedEvent="HEAD_REF_DELETED_EVENT",e.HeadRefForcePushedEvent="HEAD_REF_FORCE_PUSHED_EVENT",e.HeadRefRestoredEvent="HEAD_REF_RESTORED_EVENT",e.MergedEvent="MERGED_EVENT",e.ReviewDismissedEvent="REVIEW_DISMISSED_EVENT",e.ReviewRequestedEvent="REVIEW_REQUESTED_EVENT",e.ReviewRequestRemovedEvent="REVIEW_REQUEST_REMOVED_EVENT",e.ReadyForReviewEvent="READY_FOR_REVIEW_EVENT",e.ConvertToDraftEvent="CONVERT_TO_DRAFT_EVENT",e.IssueComment="ISSUE_COMMENT",e.CrossReferencedEvent="CROSS_REFERENCED_EVENT",e.AddedToProjectEvent="ADDED_TO_PROJECT_EVENT",e.AssignedEvent="ASSIGNED_EVENT",e.ClosedEvent="CLOSED_EVENT",e.CommentDeletedEvent="COMMENT_DELETED_EVENT",e.ConnectedEvent="CONNECTED_EVENT",e.ConvertedNoteToIssueEvent="CONVERTED_NOTE_TO_ISSUE_EVENT",e.DemilestonedEvent="DEMILESTONED_EVENT",e.DisconnectedEvent="DISCONNECTED_EVENT",e.LabeledEvent="LABELED_EVENT",e.LockedEvent="LOCKED_EVENT",e.MarkedAsDuplicateEvent="MARKED_AS_DUPLICATE_EVENT",e.MentionedEvent="MENTIONED_EVENT",e.MilestonedEvent="MILESTONED_EVENT",e.MovedColumnsInProjectEvent="MOVED_COLUMNS_IN_PROJECT_EVENT",e.PinnedEvent="PINNED_EVENT",e.ReferencedEvent="REFERENCED_EVENT",e.RemovedFromProjectEvent="REMOVED_FROM_PROJECT_EVENT",e.RenamedTitleEvent="RENAMED_TITLE_EVENT",e.ReopenedEvent="REOPENED_EVENT",e.SubscribedEvent="SUBSCRIBED_EVENT",e.TransferredEvent="TRANSFERRED_EVENT",e.UnassignedEvent="UNASSIGNED_EVENT",e.UnlabeledEvent="UNLABELED_EVENT",e.UnlockedEvent="UNLOCKED_EVENT",e.UserBlockedEvent="USER_BLOCKED_EVENT",e.UnmarkedAsDuplicateEvent="UNMARKED_AS_DUPLICATE_EVENT",e.UnpinnedEvent="UNPINNED_EVENT",e.UnsubscribedEvent="UNSUBSCRIBED_EVENT"}(t.PullRequestTimelineItemsItemType||(t.PullRequestTimelineItemsItemType={})),function(e){e.Open="OPEN",e.Closed="CLOSED"}(t.PullRequestUpdateState||(t.PullRequestUpdateState={})),function(e){e.ThumbsUp="THUMBS_UP",e.ThumbsDown="THUMBS_DOWN",e.Laugh="LAUGH",e.Hooray="HOORAY",e.Confused="CONFUSED",e.Heart="HEART",e.Rocket="ROCKET",e.Eyes="EYES"}(t.ReactionContent||(t.ReactionContent={})),function(e){e.CreatedAt="CREATED_AT"}(t.ReactionOrderField||(t.ReactionOrderField={})),function(e){e.TagCommitDate="TAG_COMMIT_DATE",e.Alphabetical="ALPHABETICAL"}(t.RefOrderField||(t.RefOrderField={})),function(e){e.CreatedAt="CREATED_AT",e.Name="NAME"}(t.ReleaseOrderField||(t.ReleaseOrderField={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoAccessAuditEntryVisibility||(t.RepoAccessAuditEntryVisibility={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoAddMemberAuditEntryVisibility||(t.RepoAddMemberAuditEntryVisibility={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoArchivedAuditEntryVisibility||(t.RepoArchivedAuditEntryVisibility={})),function(e){e.Merge="MERGE",e.Rebase="REBASE",e.Squash="SQUASH"}(t.RepoChangeMergeSettingAuditEntryMergeType||(t.RepoChangeMergeSettingAuditEntryMergeType={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoCreateAuditEntryVisibility||(t.RepoCreateAuditEntryVisibility={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoDestroyAuditEntryVisibility||(t.RepoDestroyAuditEntryVisibility={})),function(e){e.Internal="INTERNAL",e.Private="PRIVATE",e.Public="PUBLIC"}(t.RepoRemoveMemberAuditEntryVisibility||(t.RepoRemoveMemberAuditEntryVisibility={})),function(e){e.Spam="SPAM",e.Abuse="ABUSE",e.OffTopic="OFF_TOPIC",e.Outdated="OUTDATED",e.Duplicate="DUPLICATE",e.Resolved="RESOLVED"}(t.ReportedContentClassifiers||(t.ReportedContentClassifiers={})),function(e){e.Owner="OWNER",e.Collaborator="COLLABORATOR",e.OrganizationMember="ORGANIZATION_MEMBER"}(t.RepositoryAffiliation||(t.RepositoryAffiliation={})),function(e){e.Commit="COMMIT",e.Issue="ISSUE",e.PullRequest="PULL_REQUEST",e.Repository="REPOSITORY",e.PullRequestReview="PULL_REQUEST_REVIEW"}(t.RepositoryContributionType||(t.RepositoryContributionType={})),function(e){e.CreatedAt="CREATED_AT",e.InviteeLogin="INVITEE_LOGIN"}(t.RepositoryInvitationOrderField||(t.RepositoryInvitationOrderField={})),function(e){e.Moving="MOVING",e.Billing="BILLING",e.Rename="RENAME",e.Migrating="MIGRATING"}(t.RepositoryLockReason||(t.RepositoryLockReason={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.PushedAt="PUSHED_AT",e.Name="NAME",e.Stargazers="STARGAZERS"}(t.RepositoryOrderField||(t.RepositoryOrderField={})),function(e){e.Admin="ADMIN",e.Maintain="MAINTAIN",e.Write="WRITE",e.Triage="TRIAGE",e.Read="READ"}(t.RepositoryPermission||(t.RepositoryPermission={})),function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(t.RepositoryPrivacy||(t.RepositoryPrivacy={})),function(e){e.Private="PRIVATE",e.Public="PUBLIC",e.Internal="INTERNAL"}(t.RepositoryVisibility||(t.RepositoryVisibility={})),function(e){e.Sha1="SHA1",e.Sha256="SHA256",e.Sha384="SHA384",e.Sha512="SHA512"}(t.SamlDigestAlgorithm||(t.SamlDigestAlgorithm={})),function(e){e.RsaSha1="RSA_SHA1",e.RsaSha256="RSA_SHA256",e.RsaSha384="RSA_SHA384",e.RsaSha512="RSA_SHA512"}(t.SamlSignatureAlgorithm||(t.SamlSignatureAlgorithm={})),function(e){e.UpdatedAt="UPDATED_AT"}(t.SavedReplyOrderField||(t.SavedReplyOrderField={})),function(e){e.Issue="ISSUE",e.Repository="REPOSITORY",e.User="USER"}(t.SearchType||(t.SearchType={})),function(e){e.Rubygems="RUBYGEMS",e.Npm="NPM",e.Pip="PIP",e.Maven="MAVEN",e.Nuget="NUGET",e.Composer="COMPOSER"}(t.SecurityAdvisoryEcosystem||(t.SecurityAdvisoryEcosystem={})),function(e){e.Cve="CVE",e.Ghsa="GHSA"}(t.SecurityAdvisoryIdentifierType||(t.SecurityAdvisoryIdentifierType={})),function(e){e.PublishedAt="PUBLISHED_AT",e.UpdatedAt="UPDATED_AT"}(t.SecurityAdvisoryOrderField||(t.SecurityAdvisoryOrderField={})),function(e){e.Low="LOW",e.Moderate="MODERATE",e.High="HIGH",e.Critical="CRITICAL"}(t.SecurityAdvisorySeverity||(t.SecurityAdvisorySeverity={})),function(e){e.UpdatedAt="UPDATED_AT"}(t.SecurityVulnerabilityOrderField||(t.SecurityVulnerabilityOrderField={})),function(e){e.CreatedAt="CREATED_AT",e.MonthlyPriceInCents="MONTHLY_PRICE_IN_CENTS"}(t.SponsorsTierOrderField||(t.SponsorsTierOrderField={})),function(e){e.CreatedAt="CREATED_AT"}(t.SponsorshipOrderField||(t.SponsorshipOrderField={})),function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(t.SponsorshipPrivacy||(t.SponsorshipPrivacy={})),function(e){e.StarredAt="STARRED_AT"}(t.StarOrderField||(t.StarOrderField={})),function(e){e.Expected="EXPECTED",e.Error="ERROR",e.Failure="FAILURE",e.Pending="PENDING",e.Success="SUCCESS"}(t.StatusState||(t.StatusState={})),function(e){e.Unsubscribed="UNSUBSCRIBED",e.Subscribed="SUBSCRIBED",e.Ignored="IGNORED"}(t.SubscriptionState||(t.SubscriptionState={})),function(e){e.Number="NUMBER"}(t.TeamDiscussionCommentOrderField||(t.TeamDiscussionCommentOrderField={})),function(e){e.CreatedAt="CREATED_AT"}(t.TeamDiscussionOrderField||(t.TeamDiscussionOrderField={})),function(e){e.Login="LOGIN",e.CreatedAt="CREATED_AT"}(t.TeamMemberOrderField||(t.TeamMemberOrderField={})),function(e){e.Maintainer="MAINTAINER",e.Member="MEMBER"}(t.TeamMemberRole||(t.TeamMemberRole={})),function(e){e.Immediate="IMMEDIATE",e.ChildTeam="CHILD_TEAM",e.All="ALL"}(t.TeamMembershipType||(t.TeamMembershipType={})),function(e){e.Name="NAME"}(t.TeamOrderField||(t.TeamOrderField={})),function(e){e.Secret="SECRET",e.Visible="VISIBLE"}(t.TeamPrivacy||(t.TeamPrivacy={})),function(e){e.CreatedAt="CREATED_AT",e.UpdatedAt="UPDATED_AT",e.PushedAt="PUSHED_AT",e.Name="NAME",e.Permission="PERMISSION",e.Stargazers="STARGAZERS"}(t.TeamRepositoryOrderField||(t.TeamRepositoryOrderField={})),function(e){e.Admin="ADMIN",e.Member="MEMBER"}(t.TeamRole||(t.TeamRole={})),function(e){e.NotRelevant="NOT_RELEVANT",e.TooSpecific="TOO_SPECIFIC",e.PersonalPreference="PERSONAL_PREFERENCE",e.TooGeneral="TOO_GENERAL"}(t.TopicSuggestionDeclineReason||(t.TopicSuggestionDeclineReason={})),function(e){e.OneDay="ONE_DAY",e.ThreeDays="THREE_DAYS",e.OneWeek="ONE_WEEK",e.OneMonth="ONE_MONTH",e.Permanent="PERMANENT"}(t.UserBlockDuration||(t.UserBlockDuration={})),function(e){e.UpdatedAt="UPDATED_AT"}(t.UserStatusOrderField||(t.UserStatusOrderField={})),t.GetReleaseByTagDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetReleaseByTag"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tagName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"StringValue",value:"aws",block:!1}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"aws-cdk",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"release"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tagName"},value:{kind:"Variable",name:{kind:"Name",value:"tagName"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releaseAssets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}})),y=A((function(u,c){Object.defineProperty(c,"__esModule",{value:!0}),c.main=void 0;const R=_.__importDefault(i);async function A(i){e.debug("downloading: "+i);const r=function(e){const{query:t}=d.parseURL(e),{"response-content-disposition":n}=a.parse(t);if(!n)throw new Error("response-content-disposition query string not found");return n.split("filename=").pop()}(i),E=o.join(process.cwd(),"tmp"),s=o.join(process.cwd(),"tmp/"+r);if(await n.ensureDir(E),await n.pathExists(s))return e.debug("source file already downloaded: "+s),s;const u=new l.RestClient("download"),c=t.createWriteStream(s),{message:R}=await u.client.get(i);return new Promise(t=>{R.pipe(c).on("close",()=>{c.end(),e.debug("downloaded source to: "+s),t(s)})})}function T(t,n,i){E.intersects(n,i)||e.warning(`${t}@${n} and ${t}@${i} do not intersect`);const{version:r}=E.minVersion(n),{version:o}=E.minVersion(i);return E.gt(r,o)?n:i}c.main=async function(){try{const n=e.getInput("release"),i=E.clean(n),o=await e.group("Getting download URL for AWS CDK release "+n,async()=>{const{data:{repository:t}}=await I.client.query({query:D.GetReleaseByTagDocument,variables:{tagName:n}}),r=t?.release?.releaseAssets?.edges.map(e=>e.node);return e.info(`found ${r.length} assets:`),r.forEach(({name:t})=>e.info("   — "+t)),r.reduce((e,t)=>(t.name===`aws-cdk-${i}.zip`&&(e=t.url),e),null)}),a=await A(o),l=await async function(n){e.debug("parsing packages from: "+n);const i=await t.promises.readFile(n),o=await r.loadAsync(i);return Promise.all(o.folder("js").filter(e=>e.endsWith(".tgz")).map(t=>new Promise(n=>{const i=[];t.nodeStream().pipe(R.default()).pipe(s.extract()).on("entry",(function(t,n,r){if(n.on("end",(function(){r()})),"package/package.json"===t.name){const t=[];n.on("data",e=>t.push(e)).on("finish",(function(){const n=Buffer.concat(t).toString();try{const e=JSON.parse(n);i.push(e)}catch(t){e.warning(t.message)}})).on("error",t=>{e.warning(t.message)})}n.resume()})).on("finish",()=>n(i))}))).then(t=>{const n=[].concat([],...t).filter(e=>Boolean(e));return e.debug(`parsed ${Object.values(n).length} packages`),Promise.resolve(n)})}(a),{stable:d,experimental:u,deprecated:c,unknown:p}=Object.values(l).reduce((e,t)=>{switch(t.stability){case"stable":e.stable.push(t);break;case"experimental":e.experimental.push(t);break;case"deprecated":e.deprecated.push(t);break;default:e.unknown.push(t)}return e},{stable:[],experimental:[],deprecated:[],unknown:[]});e.debug("  — stable: "+d.length),e.debug("  — experimental: "+u.length),e.debug("  — deprecated: "+c.length),e.debug("  — unknown: "+p.length);const O=[d,u].flat().reduce((e,{name:t,version:n,peerDependencies:i={}})=>{const r=e[t];return r&&r!==n&&(n=T(t,r,n)),e[t]=n,Object.entries(i).forEach(([n,i])=>{const r=e[n];r&&r!==i&&(i=T(t,r,i)),e[n]=i}),e=Object.fromEntries(Object.entries(e).sort())},{});e.debug(O),e.setOutput("dependencies",O),e.exportVariable("dependencies",O)}catch(t){e.info(t),e.setFailed("Action failed with error "+t)}}})),C=R(A((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=y.main()})));export default C;
